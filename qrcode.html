<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>qrcode builder</title>
<style>#output {margin-top: 1rem;}</style>
</head>
<body>
<h1>二维码生成器</h1>
<div>
	需要生成二维码的文本：<input id="txt" />
	<button>&nbsp;biu&nbsp;</button>
</div>
<div id="output"></div>

<script src="js/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="js/jquery.qrcode.min.js"></script>
<script>
$(function(){
	$('button').click(function(){
		var text = $('#txt').val();
		if(text != ''){
			$('#output').html('').qrcode(utf16to8(text));
		}
	});
})

function utf16to8(str) {   
    var out, i, len, c;   
    out = "";   
    len = str.length;   
    for(i = 0; i < len; i++) {   
    c = str.charCodeAt(i);   
    if ((c >= 0x0001) && (c <= 0x007F)) {   
        out += str.charAt(i);   
    } else if (c > 0x07FF) {   
        out += String.fromCharCode(0xE0 | ((c >> 12) & 0x0F));   
        out += String.fromCharCode(0x80 | ((c >>  6) & 0x3F));   
        out += String.fromCharCode(0x80 | ((c >>  0) & 0x3F));   
    } else {   
        out += String.fromCharCode(0xC0 | ((c >>  6) & 0x1F));   
        out += String.fromCharCode(0x80 | ((c >>  0) & 0x3F));   
    }   
    }   
    return out;   
}  
</script>
</body>
</html>
